import{p as c,E as a,q as m}from"./index.2cc8de7c.js";const n=c.create({baseURL:"/api",timeout:15e3});n.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&e.headers&&(e.headers.Authorization=`Bearer ${s}`),e},e=>(console.error("\u8BF7\u6C42\u9519\u8BEF:",e),Promise.reject(e)));n.interceptors.response.use(e=>{const s=e.data;return s.code&&s.code!==200?(a.error(s.message||s.msg||"\u8BF7\u6C42\u5931\u8D25"),s.code===401&&(localStorage.removeItem("token"),m.push("/login")),Promise.reject(new Error(s.message||"\u8BF7\u6C42\u5931\u8D25"))):s},e=>{var r,t,o,u;console.error("\u54CD\u5E94\u9519\u8BEF:",e);const s=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||((u=(o=e.response)==null?void 0:o.data)==null?void 0:u.msg)||e.message||"\u8BF7\u6C42\u5931\u8D25";return a.error(s),Promise.reject(e)});export{n as s};
