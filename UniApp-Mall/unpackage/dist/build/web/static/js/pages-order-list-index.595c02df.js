(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-list-index"],{"30f7":function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},r("7a76"),r("c9b5")},4733:function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,o.default)(e)};var o=function(e){return e&&e.__esModule?e:{default:e}}(r("8d0b"))},5724:function(e,t,r){"use strict";r.r(t);var o=r("7cdc"),n=r("6ae9");for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);r("eb1e");var i=r("828b"),d=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,"35122cd1",null,!1,o["a"],void 0);t["default"]=d.exports},"6ae9":function(e,t,r){"use strict";r.r(t);var o=r("8433"),n=r.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(a);t["default"]=n.a},"7cdc":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"order-container"},[r("v-uni-view",{staticClass:"tab-box"},e._l(e.tabList,(function(t,o){return r("v-uni-view",{key:o,staticClass:"tab-item",class:{active:e.currentTab===o},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchTab(o)}}},[e._v(e._s(t.name))])})),1),r("v-uni-scroll-view",{staticClass:"order-list",attrs:{"scroll-y":!0},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.loadMore.apply(void 0,arguments)}}},[e._l(e.orderList,(function(t,o){return r("v-uni-view",{key:o,staticClass:"order-item"},[r("v-uni-view",{staticClass:"order-header"},[r("v-uni-text",{staticClass:"order-no"},[e._v("订单号："+e._s(t.orderNo))]),r("v-uni-text",{staticClass:"order-status"},[e._v(e._s(e.getStatusText(t.status)))])],1),e._l(t.orderItems,(function(o,n){return r("v-uni-view",{key:n,staticClass:"goods-item",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.navToOrderDetail(t.id)}}},[r("v-uni-image",{staticClass:"goods-image",attrs:{src:o.productPic,mode:"aspectFill"}}),r("v-uni-view",{staticClass:"goods-info"},[r("v-uni-text",{staticClass:"goods-name text-ellipsis-2"},[e._v(e._s(o.productName))]),o.skuName?r("v-uni-text",{staticClass:"goods-sku"},[e._v("规格："+e._s(o.skuName))]):e._e(),r("v-uni-view",{staticClass:"goods-price-box"},[r("v-uni-text",{staticClass:"goods-price"},[e._v("¥"+e._s(o.price))]),r("v-uni-text",{staticClass:"goods-quantity"},[e._v("x"+e._s(o.quantity))])],1)],1)],1)})),r("v-uni-view",{staticClass:"order-footer"},[r("v-uni-view",{staticClass:"order-total"},[r("v-uni-text",[e._v("共"+e._s(e.getTotalQuantity(t.orderItems))+"件商品 合计：")]),r("v-uni-text",{staticClass:"total-price"},[e._v("¥"+e._s(t.payAmount))])],1),r("v-uni-view",{staticClass:"order-actions"},[0===t.status?r("v-uni-view",{staticClass:"action-btn cancel-btn",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.cancelOrder(t.id)}}},[e._v("取消订单")]):e._e(),0===t.status?r("v-uni-view",{staticClass:"action-btn pay-btn",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.payOrder(t.id)}}},[e._v("去支付")]):e._e(),2===t.status?r("v-uni-view",{staticClass:"action-btn confirm-btn",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.confirmReceive(t.id)}}},[e._v("确认收货")]):e._e(),r("v-uni-view",{staticClass:"action-btn detail-btn",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.navToOrderDetail(t.id)}}},[e._v("订单详情")])],1)],1)],2)})),0!==e.orderList.length||e.loading?e._e():r("v-uni-view",{staticClass:"empty-state"},[r("v-uni-image",{staticClass:"empty-image",attrs:{src:"/static/empty-order.png",mode:"aspectFit"}}),r("v-uni-text",{staticClass:"empty-text"},[e._v("暂无相关订单")])],1),e.loading?r("v-uni-view",{staticClass:"loading"},[r("v-uni-text",[e._v("加载中...")])],1):e._e(),!e.hasMore&&e.orderList.length>0&&!e.loading?r("v-uni-view",{staticClass:"no-more"},[r("v-uni-text",[e._v("没有更多数据了")])],1):e._e()],2)],1)},n=[]},8433:function(e,t,r){"use strict";r("6a54");var o=r("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("c223"),r("473f"),r("bf0f");var n=o(r("2634")),a=o(r("b7c7")),i=o(r("2fdc")),d=r("c68b"),s={data:function(){return{tabList:[{name:"全部",status:-1},{name:"待付款",status:0},{name:"待发货",status:1},{name:"待收货",status:2},{name:"已完成",status:3}],currentTab:0,orderList:[],pageNum:1,pageSize:10,hasMore:!0,loading:!1}},onLoad:function(){this.loadOrderList()},methods:{switchTab:function(e){this.currentTab!==e&&(this.currentTab=e,this.orderList=[],this.pageNum=1,this.hasMore=!0,this.loadOrderList())},loadOrderList:function(){var e=this;return(0,i.default)((0,n.default)().mark((function t(){var r,o,i;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasMore&&!e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,r={pageNum:e.pageNum,pageSize:e.pageSize},o=e.tabList[e.currentTab].status,-1!==o&&(r.status=o),t.next=9,(0,d.getOrderList)(r);case 9:i=t.sent,e.loading=!1,i&&i.data&&i.data.records&&(1===e.pageNum?e.orderList=i.data.records:e.orderList=[].concat((0,a.default)(e.orderList),(0,a.default)(i.data.records)),e.hasMore=e.orderList.length<i.data.total,e.pageNum++),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](3),e.loading=!1,console.error("加载订单列表失败",t.t0),uni.showToast({title:"加载订单列表失败",icon:"none"});case 19:case"end":return t.stop()}}),t,null,[[3,14]])})))()},loadMore:function(){this.loadOrderList()},getStatusText:function(e){switch(e){case 0:return"待付款";case 1:return"待发货";case 2:return"待收货";case 3:return"已完成";case 4:return"已取消";case 5:return"已退款";default:return"未知状态"}},getTotalQuantity:function(e){return e.reduce((function(e,t){return e+t.quantity}),0)},cancelOrder:function(e){var t=this;uni.showModal({title:"提示",content:"确定要取消该订单吗？",success:function(){var r=(0,i.default)((0,n.default)().mark((function r(o){return(0,n.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!o.confirm){r.next=18;break}return r.prev=1,uni.showLoading({title:"处理中..."}),r.next=5,(0,d.updateOrderStatus)(e,4);case 5:uni.hideLoading(),uni.showToast({title:"订单已取消",icon:"success"}),t.orderList=[],t.pageNum=1,t.hasMore=!0,t.loadOrderList(),r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](1),uni.hideLoading(),console.error("取消订单失败",r.t0),uni.showToast({title:"取消订单失败",icon:"none"});case 18:case"end":return r.stop()}}),r,null,[[1,13]])})));return function(e){return r.apply(this,arguments)}}()})},payOrder:function(e){var t=this;uni.showModal({title:"提示",content:"是否模拟支付成功？",success:function(){var r=(0,i.default)((0,n.default)().mark((function r(o){return(0,n.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!o.confirm){r.next=18;break}return r.prev=1,uni.showLoading({title:"支付中..."}),r.next=5,(0,d.updateOrderStatus)(e,1);case 5:uni.hideLoading(),uni.showToast({title:"支付成功",icon:"success"}),t.orderList=[],t.pageNum=1,t.hasMore=!0,t.loadOrderList(),r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](1),uni.hideLoading(),console.error("支付失败",r.t0),uni.showToast({title:"支付失败",icon:"none"});case 18:case"end":return r.stop()}}),r,null,[[1,13]])})));return function(e){return r.apply(this,arguments)}}()})},confirmReceive:function(e){var t=this;uni.showModal({title:"提示",content:"确定已收到商品？",success:function(){var r=(0,i.default)((0,n.default)().mark((function r(o){return(0,n.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!o.confirm){r.next=18;break}return r.prev=1,uni.showLoading({title:"处理中..."}),r.next=5,(0,d.updateOrderStatus)(e,3);case 5:uni.hideLoading(),uni.showToast({title:"确认收货成功",icon:"success"}),t.orderList=[],t.pageNum=1,t.hasMore=!0,t.loadOrderList(),r.next=18;break;case 13:r.prev=13,r.t0=r["catch"](1),uni.hideLoading(),console.error("确认收货失败",r.t0),uni.showToast({title:"确认收货失败",icon:"none"});case 18:case"end":return r.stop()}}),r,null,[[1,13]])})));return function(e){return r.apply(this,arguments)}}()})},navToOrderDetail:function(e){uni.navigateTo({url:"/pages/order-detail/index?id=".concat(e)})}}};t.default=s},a56c:function(e,t,r){var o=r("c86c");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/* 主题颜色 */\n/* 文字颜色 */\n/* 边框颜色 */\n/* 背景颜色 */\n/* 字体大小 */\n/* 间距 */\n/* 圆角 */\n/* 阴影 */.order-container[data-v-35122cd1]{min-height:100vh;background-color:#f5f5f5;display:flex;flex-direction:column}.order-container .tab-box[data-v-35122cd1]{display:flex;background-color:#fff;height:%?80?%;border-bottom:%?1?% solid #ebeef5}.order-container .tab-box .tab-item[data-v-35122cd1]{flex:1;display:flex;align-items:center;justify-content:center;font-size:%?28?%;color:#606266;position:relative}.order-container .tab-box .tab-item.active[data-v-35122cd1]{color:#ff6700;font-weight:700}.order-container .tab-box .tab-item.active[data-v-35122cd1]::after{content:"";position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?60?%;height:%?4?%;background-color:#ff6700}.order-container .order-list[data-v-35122cd1]{flex:1}.order-container .order-list .order-item[data-v-35122cd1]{margin:%?20?%;background-color:#fff;border-radius:%?12?%;overflow:hidden}.order-container .order-list .order-item .order-header[data-v-35122cd1]{display:flex;justify-content:space-between;align-items:center;padding:%?20?% %?30?%;border-bottom:%?1?% solid #ebeef5}.order-container .order-list .order-item .order-header .order-no[data-v-35122cd1]{font-size:%?24?%;color:#909399}.order-container .order-list .order-item .order-header .order-status[data-v-35122cd1]{font-size:%?24?%;color:#ff6700}.order-container .order-list .order-item .goods-item[data-v-35122cd1]{display:flex;padding:%?20?% %?30?%;border-bottom:%?1?% solid #ebeef5}.order-container .order-list .order-item .goods-item .goods-image[data-v-35122cd1]{width:%?140?%;height:%?140?%;border-radius:%?8?%;margin-right:%?20?%}.order-container .order-list .order-item .goods-item .goods-info[data-v-35122cd1]{flex:1;display:flex;flex-direction:column;justify-content:space-between}.order-container .order-list .order-item .goods-item .goods-info .goods-name[data-v-35122cd1]{font-size:%?28?%;color:#303133;line-height:1.4;height:2.8em}.order-container .order-list .order-item .goods-item .goods-info .goods-sku[data-v-35122cd1]{font-size:%?24?%;color:#909399;margin-top:%?10?%}.order-container .order-list .order-item .goods-item .goods-info .goods-price-box[data-v-35122cd1]{display:flex;justify-content:space-between;align-items:center}.order-container .order-list .order-item .goods-item .goods-info .goods-price-box .goods-price[data-v-35122cd1]{font-size:%?32?%;color:#ff6700}.order-container .order-list .order-item .goods-item .goods-info .goods-price-box .goods-quantity[data-v-35122cd1]{font-size:%?28?%;color:#909399}.order-container .order-list .order-item .order-footer[data-v-35122cd1]{padding:%?20?% %?30?%}.order-container .order-list .order-item .order-footer .order-total[data-v-35122cd1]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:%?20?%;font-size:%?28?%;color:#606266}.order-container .order-list .order-item .order-footer .order-total .total-price[data-v-35122cd1]{color:#ff6700;font-weight:700}.order-container .order-list .order-item .order-footer .order-actions[data-v-35122cd1]{display:flex;justify-content:flex-end}.order-container .order-list .order-item .order-footer .order-actions .action-btn[data-v-35122cd1]{padding:%?10?% %?30?%;border-radius:%?8?%;font-size:%?24?%;margin-left:%?20?%}.order-container .order-list .order-item .order-footer .order-actions .cancel-btn[data-v-35122cd1]{color:#606266;border:%?1?% solid #dcdfe6}.order-container .order-list .order-item .order-footer .order-actions .pay-btn[data-v-35122cd1]{color:#fff;background-color:#ff6700}.order-container .order-list .order-item .order-footer .order-actions .confirm-btn[data-v-35122cd1]{color:#fff;background-color:#67c23a}.order-container .order-list .order-item .order-footer .order-actions .detail-btn[data-v-35122cd1]{color:#606266;border:%?1?% solid #dcdfe6}.order-container .order-list .empty-state[data-v-35122cd1]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:%?200?%}.order-container .order-list .empty-state .empty-image[data-v-35122cd1]{width:%?240?%;height:%?240?%;margin-bottom:%?30?%}.order-container .order-list .empty-state .empty-text[data-v-35122cd1]{font-size:%?32?%;color:#909399}.order-container .order-list .loading[data-v-35122cd1], .order-container .order-list .no-more[data-v-35122cd1]{padding:%?30?% 0;display:flex;align-items:center;justify-content:center;color:#909399;font-size:%?28?%}',""]),e.exports=t},a8e0:function(e,t,r){var o=r("a56c");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=r("967d").default;n("6225a32e",o,!0,{sourceMap:!1,shadowMode:!1})},b7c7:function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)||(0,n.default)(e)||(0,a.default)(e)||(0,i.default)()};var o=d(r("4733")),n=d(r("d14d")),a=d(r("5d6b")),i=d(r("30f7"));function d(e){return e&&e.__esModule?e:{default:e}}},c68b:function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.updateOrderStatus=t.getOrderList=t.getOrderDetail=t.createOrder=void 0,r("c223");var o=r("a8e1");t.createOrder=function(e){return(0,o.post)("/orders",e)};t.getOrderList=function(e){return(0,o.get)("/orders/page",e)};t.getOrderDetail=function(e){return(0,o.get)("/orders/".concat(e))};t.updateOrderStatus=function(e,t){return(0,o.put)("/orders/".concat(e,"/status?status=").concat(t))}},d14d:function(e,t,r){"use strict";r("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},r("01a2"),r("e39c"),r("bf0f"),r("844d"),r("18f7"),r("de6c"),r("08eb")},eb1e:function(e,t,r){"use strict";var o=r("a8e0"),n=r.n(o);n.a}}]);