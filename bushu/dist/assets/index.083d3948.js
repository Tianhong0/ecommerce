import{s as G}from"./request.12a390b5.js";import{_ as le,d as ae,u as ne,c as de,r as _,w as L,o as ie,a as re,b as d,e as B,f as g,g as s,h as t,i as u,t as a,j as i,k as ce,F as z,l as O,m as me,n as pe,E as b}from"./index.2cc8de7c.js";function _e(){return G({url:"/system/info",method:"get"})}function ve(){return G({url:"/system/cpu",method:"get"})}const Fe={class:"dashboard-container"},fe={class:"welcome-info"},Be={class:"welcome-text"},Ce={class:"system-info"},ye={class:"card-header"},ge={class:"monitor-content"},De={class:"progress-value"},Ee={class:"value"},be={class:"monitor-details"},Ae={class:"detail-item"},we={class:"value"},ke={class:"detail-item"},Ue={class:"value"},Ne={class:"detail-item"},Ve={class:"value"},he={key:0,class:"detail-item"},xe={class:"value"},Te={class:"card-header"},Se={class:"monitor-content"},Ie={class:"progress-value"},Me={class:"value"},$e={class:"monitor-details"},je={class:"detail-item"},Je={class:"value"},Le={class:"detail-item"},ze={class:"value"},Oe={class:"detail-item"},Ge={class:"value"},Pe={class:"card-header"},qe={class:"monitor-content"},He={class:"progress-value"},Re={class:"value"},Ke={class:"monitor-details"},Qe={class:"detail-item"},We={class:"value"},Xe={class:"detail-item"},Ye={class:"value"},Ze={class:"detail-item"},eu={class:"value"},uu={class:"card-header"},tu={class:"notice-content"},su={class:"card-header"},ou={class:"todo-content"},lu={class:"todo-time"},au=ae({__name:"index",setup(nu){const I=ne(),P=de(()=>new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})),v=_({osName:"",osVersion:"",osArch:"",javaVersion:"",javaVendor:"",javaHome:"",userDir:"",userHome:"",userName:""}),n=_({cpuModel:"",cpuCores:0,cpuThreads:0,cpuTemperature:null,cpuUsage:"0",memoryTotal:"0",memoryUsed:"0",memoryFree:"0",memoryUsage:"0",diskTotal:"0",diskUsed:"0",diskFree:"0",diskUsage:"0"}),A=o=>{const e=Number(o);return e<60?"success":e<80?"warning":"danger"},w=o=>{const e=Number(o);return e<60?"\u6B63\u5E38":e<80?"\u8B66\u544A":"\u5371\u9669"},k=o=>o<60?"#67C23A":o<80?"#E6A23C":"#F56C6C",q=async()=>{try{const o=await _e();o.data&&(v.value=o.data)}catch(o){console.error("\u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\u5931\u8D25:",o),b.error("\u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\u5931\u8D25")}},M=async()=>{try{const o=await ve();o.data&&(n.value=o.data)}catch(o){console.error("\u83B7\u53D6\u7CFB\u7EDF\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5\u5931\u8D25:",o),b.error("\u83B7\u53D6\u7CFB\u7EDF\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5\u5931\u8D25")}},D=_(JSON.parse(localStorage.getItem("dashboard_notices")||"[]")||[{content:"\u7CFB\u7EDF\u5C06\u4E8E\u672C\u5468\u516D\u51CC\u66682\u70B9\u8FDB\u884C\u4F8B\u884C\u7EF4\u62A4",time:"2024-03-20 10:00:00",type:"warning"},{content:"\u65B0\u7248\u672C\u529F\u80FD\u66F4\u65B0\uFF1A\u65B0\u589E\u8BA2\u5355\u5BFC\u51FA\u529F\u80FD",time:"2024-03-19 15:30:00",type:"primary"},{content:"\u7CFB\u7EDF\u6027\u80FD\u4F18\u5316\u5B8C\u6210\uFF0C\u8FD0\u884C\u66F4\u6D41\u7545",time:"2024-03-18 09:00:00",type:"success"}]);L(D,o=>{localStorage.setItem("dashboard_notices",JSON.stringify(o))},{deep:!0});const H=o=>{const e={content:o.content,time:o.time||new Date().toLocaleString(),type:o.type||"primary"};D.value.unshift(e)},R=o=>{D.value.splice(o,1)},F=_(JSON.parse(localStorage.getItem("dashboard_todos")||"[]")||[{id:1,content:"\u5BA1\u6838\u65B0\u4E0A\u67B6\u5546\u54C1",time:"\u4ECA\u5929 14:00",done:!1},{id:2,content:"\u5904\u7406\u9000\u6B3E\u7533\u8BF7",time:"\u4ECA\u5929 16:00",done:!1},{id:3,content:"\u66F4\u65B0\u5546\u54C1\u5E93\u5B58",time:"\u660E\u5929 10:00",done:!1}]);L(F,o=>{localStorage.setItem("dashboard_todos",JSON.stringify(o))},{deep:!0});const K=o=>{const e={id:Date.now(),content:o.content,time:o.time||"\u4ECA\u5929",done:!1};F.value.push(e)},Q=o=>{const e=F.value.findIndex(m=>m.id===o);e!==-1&&F.value.splice(e,1)},W=o=>{const e=F.value.find(m=>m.id===o);e&&(e.done=!e.done)},C=_(!1),r=_({content:"",type:"primary"}),X=()=>{if(!r.value.content.trim()){b.warning("\u8BF7\u8F93\u5165\u516C\u544A\u5185\u5BB9");return}H({content:r.value.content,type:r.value.type,time:new Date().toLocaleString()}),r.value.content="",r.value.type="primary",C.value=!1},y=_(!1),c=_({content:"",time:""}),Y=()=>{if(!c.value.content.trim()){b.warning("\u8BF7\u8F93\u5165\u5F85\u529E\u4E8B\u9879\u5185\u5BB9");return}K({content:c.value.content,time:c.value.time||"\u4ECA\u5929"}),c.value.content="",c.value.time="",y.value=!1};let U;return ie(async()=>{(I.path==="/"||I.path==="/dashboard")&&(await q(),await M(),U=window.setInterval(M,3e3))}),re(()=>{U&&clearInterval(U)}),(o,e)=>{const m=d("el-descriptions-item"),Z=d("el-descriptions"),f=d("el-card"),N=d("el-tag"),V=d("el-progress"),h=d("el-col"),ee=d("el-row"),p=d("el-button"),ue=d("el-timeline-item"),te=d("el-timeline"),se=d("el-checkbox"),x=d("el-input"),E=d("el-form-item"),T=d("el-option"),oe=d("el-select"),$=d("el-form"),j=d("el-dialog");return B(),g("div",Fe,[s(f,{class:"welcome-card"},{default:t(()=>[u("div",fe,[u("div",Be,[e[10]||(e[10]=u("h2",null,"\u6B22\u8FCE\u4F7F\u7528\u7535\u5546\u7BA1\u7406\u7CFB\u7EDF",-1)),u("p",null,"\u4ECA\u5929\u662F "+a(P.value)+"\uFF0C\u795D\u60A8\u5DE5\u4F5C\u6109\u5FEB\uFF01",1)]),u("div",Ce,[s(Z,{column:2,border:""},{default:t(()=>[s(m,{label:"\u64CD\u4F5C\u7CFB\u7EDF"},{default:t(()=>[i(a(v.value.osName)+" "+a(v.value.osVersion),1)]),_:1}),s(m,{label:"\u7CFB\u7EDF\u67B6\u6784"},{default:t(()=>[i(a(v.value.osArch),1)]),_:1}),s(m,{label:"Java\u7248\u672C"},{default:t(()=>[i(a(v.value.javaVersion),1)]),_:1}),s(m,{label:"\u7528\u6237\u540D"},{default:t(()=>[i(a(v.value.userName),1)]),_:1})]),_:1})])])]),_:1}),s(ee,{gutter:20,class:"monitor-section"},{default:t(()=>[s(h,{span:8},{default:t(()=>[s(f,{class:"monitor-card"},{header:t(()=>[u("div",ye,[e[11]||(e[11]=u("span",null,"CPU\u4F7F\u7528\u7387",-1)),s(N,{type:A(n.value.cpuUsage)},{default:t(()=>[i(a(w(n.value.cpuUsage)),1)]),_:1},8,["type"])])]),default:t(()=>[u("div",ge,[s(V,{type:"dashboard",percentage:Number(n.value.cpuUsage),color:k(Number(n.value.cpuUsage))},{default:t(({percentage:l})=>[u("div",De,[u("span",Ee,a(l)+"%",1),e[12]||(e[12]=u("span",{class:"label"},"CPU\u4F7F\u7528\u7387",-1))])]),_:1},8,["percentage","color"]),u("div",be,[u("div",Ae,[e[13]||(e[13]=u("span",{class:"label"},"\u578B\u53F7\uFF1A",-1)),u("span",we,a(n.value.cpuModel),1)]),u("div",ke,[e[14]||(e[14]=u("span",{class:"label"},"\u6838\u5FC3\u6570\uFF1A",-1)),u("span",Ue,a(n.value.cpuCores),1)]),u("div",Ne,[e[15]||(e[15]=u("span",{class:"label"},"\u7EBF\u7A0B\u6570\uFF1A",-1)),u("span",Ve,a(n.value.cpuThreads),1)]),n.value.cpuTemperature?(B(),g("div",he,[e[16]||(e[16]=u("span",{class:"label"},"\u6E29\u5EA6\uFF1A",-1)),u("span",xe,a(n.value.cpuTemperature)+"\xB0C",1)])):ce("",!0)])])]),_:1})]),_:1}),s(h,{span:8},{default:t(()=>[s(f,{class:"monitor-card"},{header:t(()=>[u("div",Te,[e[17]||(e[17]=u("span",null,"\u5185\u5B58\u4F7F\u7528\u7387",-1)),s(N,{type:A(n.value.memoryUsage)},{default:t(()=>[i(a(w(n.value.memoryUsage)),1)]),_:1},8,["type"])])]),default:t(()=>[u("div",Se,[s(V,{type:"dashboard",percentage:Number(n.value.memoryUsage),color:k(Number(n.value.memoryUsage))},{default:t(({percentage:l})=>[u("div",Ie,[u("span",Me,a(l)+"%",1),e[18]||(e[18]=u("span",{class:"label"},"\u5185\u5B58\u4F7F\u7528\u7387",-1))])]),_:1},8,["percentage","color"]),u("div",$e,[u("div",je,[e[19]||(e[19]=u("span",{class:"label"},"\u603B\u5185\u5B58\uFF1A",-1)),u("span",Je,a(n.value.memoryTotal)+" MB",1)]),u("div",Le,[e[20]||(e[20]=u("span",{class:"label"},"\u5DF2\u4F7F\u7528\uFF1A",-1)),u("span",ze,a(n.value.memoryUsed)+" MB",1)]),u("div",Oe,[e[21]||(e[21]=u("span",{class:"label"},"\u53EF\u7528\uFF1A",-1)),u("span",Ge,a(n.value.memoryFree)+" MB",1)])])])]),_:1})]),_:1}),s(h,{span:8},{default:t(()=>[s(f,{class:"monitor-card"},{header:t(()=>[u("div",Pe,[e[22]||(e[22]=u("span",null,"\u78C1\u76D8\u4F7F\u7528\u7387",-1)),s(N,{type:A(n.value.diskUsage)},{default:t(()=>[i(a(w(n.value.diskUsage)),1)]),_:1},8,["type"])])]),default:t(()=>[u("div",qe,[s(V,{type:"dashboard",percentage:Number(n.value.diskUsage),color:k(Number(n.value.diskUsage))},{default:t(({percentage:l})=>[u("div",He,[u("span",Re,a(l)+"%",1),e[23]||(e[23]=u("span",{class:"label"},"\u78C1\u76D8\u4F7F\u7528\u7387",-1))])]),_:1},8,["percentage","color"]),u("div",Ke,[u("div",Qe,[e[24]||(e[24]=u("span",{class:"label"},"\u603B\u5BB9\u91CF\uFF1A",-1)),u("span",We,a(n.value.diskTotal)+" GB",1)]),u("div",Xe,[e[25]||(e[25]=u("span",{class:"label"},"\u5DF2\u4F7F\u7528\uFF1A",-1)),u("span",Ye,a(n.value.diskUsed)+" GB",1)]),u("div",Ze,[e[26]||(e[26]=u("span",{class:"label"},"\u53EF\u7528\uFF1A",-1)),u("span",eu,a(n.value.diskFree)+" GB",1)])])])]),_:1})]),_:1})]),_:1}),s(f,{class:"notice-card"},{header:t(()=>[u("div",uu,[e[28]||(e[28]=u("span",null,"\u7CFB\u7EDF\u516C\u544A",-1)),s(p,{type:"primary",link:"",onClick:e[0]||(e[0]=l=>C.value=!0)},{default:t(()=>e[27]||(e[27]=[i(" \u6DFB\u52A0 ")])),_:1,__:[27]})])]),default:t(()=>[s(te,null,{default:t(()=>[(B(!0),g(z,null,O(D.value,(l,S)=>(B(),me(ue,{key:S,timestamp:l.time,type:l.type},{default:t(()=>[u("div",tu,[i(a(l.content)+" ",1),s(p,{type:"text",size:"small",onClick:J=>R(S)},{default:t(()=>e[29]||(e[29]=[i(" \u5220\u9664 ")])),_:2,__:[29]},1032,["onClick"])])]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),_:1}),s(f,{class:"todo-card"},{header:t(()=>[u("div",su,[e[31]||(e[31]=u("span",null,"\u5F85\u529E\u4E8B\u9879",-1)),s(p,{type:"primary",link:"",onClick:e[1]||(e[1]=l=>y.value=!0)},{default:t(()=>e[30]||(e[30]=[i("\u6DFB\u52A0")])),_:1,__:[30]})])]),default:t(()=>[(B(!0),g(z,null,O(F.value,(l,S)=>(B(),g("div",{key:l.id,class:"todo-item"},[u("div",ou,[s(se,{"model-value":l.done,onChange:J=>W(l.id)},{default:t(()=>[u("span",{class:pe({"todo-done":l.done})},a(l.content),3)]),_:2},1032,["model-value","onChange"]),u("span",lu,a(l.time),1)]),s(p,{type:"text",size:"small",onClick:J=>Q(l.id)},{default:t(()=>e[32]||(e[32]=[i(" \u5220\u9664 ")])),_:2,__:[32]},1032,["onClick"])]))),128))]),_:1}),s(j,{modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=l=>C.value=l),title:"\u6DFB\u52A0\u7CFB\u7EDF\u516C\u544A",width:"500px"},{footer:t(()=>[s(p,{onClick:e[4]||(e[4]=l=>C.value=!1)},{default:t(()=>e[33]||(e[33]=[i("\u53D6\u6D88")])),_:1,__:[33]}),s(p,{type:"primary",onClick:X},{default:t(()=>e[34]||(e[34]=[i("\u786E\u5B9A")])),_:1,__:[34]})]),default:t(()=>[s($,{model:r.value,"label-width":"80px"},{default:t(()=>[s(E,{label:"\u516C\u544A\u5185\u5BB9",required:""},{default:t(()=>[s(x,{modelValue:r.value.content,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.content=l),type:"textarea",rows:4,placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u516C\u544A\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),s(E,{label:"\u516C\u544A\u7C7B\u578B"},{default:t(()=>[s(oe,{modelValue:r.value.type,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.type=l),placeholder:"\u8BF7\u9009\u62E9\u516C\u544A\u7C7B\u578B"},{default:t(()=>[s(T,{label:"\u666E\u901A",value:"primary"}),s(T,{label:"\u6210\u529F",value:"success"}),s(T,{label:"\u8B66\u544A",value:"warning"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(j,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=l=>y.value=l),title:"\u6DFB\u52A0\u5F85\u529E\u4E8B\u9879",width:"500px"},{footer:t(()=>[s(p,{onClick:e[8]||(e[8]=l=>y.value=!1)},{default:t(()=>e[35]||(e[35]=[i("\u53D6\u6D88")])),_:1,__:[35]}),s(p,{type:"primary",onClick:Y},{default:t(()=>e[36]||(e[36]=[i("\u786E\u5B9A")])),_:1,__:[36]})]),default:t(()=>[s($,{model:c.value,"label-width":"80px"},{default:t(()=>[s(E,{label:"\u4E8B\u9879\u5185\u5BB9",required:""},{default:t(()=>[s(x,{modelValue:c.value.content,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value.content=l),placeholder:"\u8BF7\u8F93\u5165\u5F85\u529E\u4E8B\u9879\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),s(E,{label:"\u5B8C\u6210\u65F6\u95F4"},{default:t(()=>[s(x,{modelValue:c.value.time,"onUpdate:modelValue":e[7]||(e[7]=l=>c.value.time=l),placeholder:"\u4F8B\u5982\uFF1A\u4ECA\u5929 14:00 \u6216 \u660E\u5929\u4E0A\u5348"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});var ru=le(au,[["__scopeId","data-v-3c2cd4f0"]]);export{ru as default};
