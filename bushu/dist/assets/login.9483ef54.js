import{_ as j,d as L,v as N,s as P,x as I,r as y,y as E,b as _,e as C,f as S,i as l,z as u,t as p,A as $,B as G,m as D,h as s,g as a,n as A,j as F,C as M,D as O,E as x,G as H}from"./index.2cc8de7c.js";var J="./assets/left.167ce885.jpg";const K={class:"container"},Q={class:"box"},W={class:"login-content-left"},X=["src"],Y={class:"login-content-left-mask"},Z={class:"box-inner"},ee={class:"form-footer"},se={class:"form-footer"},ae={class:"fixed-top-right"},te=L({__name:"login",setup(le){const z=N(),V=P(),{t:r}=I(),v=y(),h=y(),g=y(!1),c=y("password"),w=y(!0),m=E({name:"admin",password:"123456"}),t=E({username:"",password:"",nickname:"",email:"",phone:""}),R={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},T={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0",trigger:"blur"}],email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1",trigger:"blur"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F",trigger:"blur"}],phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u683C\u5F0F",trigger:"blur"}]},k=()=>{c.value=c.value===""?"password":""},B=n=>{w.value=n},q=async()=>{if(!!v.value)try{if(await v.value.validate(),g.value=!0,(await z.dispatch("user/login",{username:m.name,password:m.password,client_id:"web",client_secret:"123456"})).success)try{const{getAuthRoutes:e}=await O(()=>import("./index.2cc8de7c.js").then(function(i){return i.P}),["assets/index.2cc8de7c.js","assets/index.0061107a.css"]);await e(),setTimeout(()=>{V.push("/")},300)}catch(e){console.error("\u8DEF\u7531\u52A0\u8F7D\u5931\u8D25:",e),V.push("/")}}catch(n){console.error("\u767B\u5F55\u5931\u8D25:",n),x.error(n.message||"\u767B\u5F55\u5931\u8D25")}finally{g.value=!1}},U=async()=>{if(!!h.value)try{await h.value.validate(),g.value=!0;const n=await H(t);n&&n.success&&(x.success(n.message||"\u6CE8\u518C\u6210\u529F"),B(!0),t.username="",t.password="",t.nickname="",t.email="",t.phone="")}catch(n){console.error("\u6CE8\u518C\u5931\u8D25:",n),x.error(n.message||"\u6CE8\u518C\u5931\u8D25")}finally{g.value=!1}};return(n,e)=>{const i=_("el-input"),d=_("el-form-item"),f=_("el-button"),b=_("el-form");return C(),S("div",K,[l("div",Q,[l("div",W,[l("img",{src:u(J)},null,8,X),l("div",Y,[l("div",null,p(u(r)(u($))),1),l("div",null,p(u(r)(u(G))),1)])]),l("div",Z,[l("h1",null,p(u(r)(w.value?"message.system.welcome":"message.system.register")),1),w.value?(C(),D(b,{key:0,ref_key:"loginFormRef",ref:v,model:m,rules:R,class:"form"},{default:s(()=>[a(d,{prop:"name"},{default:s(()=>[a(i,{size:"large",modelValue:m.name,"onUpdate:modelValue":e[0]||(e[0]=o=>m.name=o),placeholder:u(r)("message.system.userName"),type:"text",maxlength:"50"},{prepend:s(()=>e[9]||(e[9]=[l("i",{class:"sfont system-xingmingyonghumingnicheng"},null,-1)])),_:1},8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"password"},{default:s(()=>[a(i,{size:"large",modelValue:m.password,"onUpdate:modelValue":e[1]||(e[1]=o=>m.password=o),type:c.value,placeholder:u(r)("message.system.password"),name:"password",maxlength:"50"},{prepend:s(()=>e[10]||(e[10]=[l("i",{class:"sfont system-mima"},null,-1)])),append:s(()=>[l("i",{class:A(["sfont password-icon",c.value?"system-yanjing-guan":"system-yanjing"]),onClick:k},null,2)]),_:1},8,["modelValue","type","placeholder"])]),_:1}),a(f,{type:"primary",loading:g.value,onClick:q,style:{width:"100%"},size:"default"},{default:s(()=>[F(p(u(r)("message.system.login")),1)]),_:1},8,["loading"]),l("div",ee,[a(f,{type:"text",onClick:e[2]||(e[2]=o=>B(!1))},{default:s(()=>[F(p(u(r)("message.system.goToRegister")||"\u6CA1\u6709\u8D26\u53F7\uFF1F\u53BB\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["model"])):(C(),D(b,{key:1,ref_key:"registerFormRef",ref:h,model:t,rules:T,class:"form"},{default:s(()=>[a(d,{prop:"username"},{default:s(()=>[a(i,{size:"large",modelValue:t.username,"onUpdate:modelValue":e[3]||(e[3]=o=>t.username=o),placeholder:u(r)("message.system.userName"),type:"text",maxlength:"50"},{prepend:s(()=>e[11]||(e[11]=[l("i",{class:"sfont system-xingmingyonghumingnicheng"},null,-1)])),_:1},8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"password"},{default:s(()=>[a(i,{size:"large",modelValue:t.password,"onUpdate:modelValue":e[4]||(e[4]=o=>t.password=o),type:c.value,placeholder:u(r)("message.system.password"),maxlength:"50"},{prepend:s(()=>e[12]||(e[12]=[l("i",{class:"sfont system-mima"},null,-1)])),append:s(()=>[l("i",{class:A(["sfont password-icon",c.value?"system-yanjing-guan":"system-yanjing"]),onClick:k},null,2)]),_:1},8,["modelValue","type","placeholder"])]),_:1}),a(d,{prop:"nickname"},{default:s(()=>[a(i,{size:"large",modelValue:t.nickname,"onUpdate:modelValue":e[5]||(e[5]=o=>t.nickname=o),placeholder:u(r)("message.system.nickname")||"\u6635\u79F0",type:"text",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"email"},{default:s(()=>[a(i,{size:"large",modelValue:t.email,"onUpdate:modelValue":e[6]||(e[6]=o=>t.email=o),placeholder:u(r)("message.system.email")||"\u90AE\u7BB1",type:"email",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"phone"},{default:s(()=>[a(i,{size:"large",modelValue:t.phone,"onUpdate:modelValue":e[7]||(e[7]=o=>t.phone=o),placeholder:u(r)("message.system.phone")||"\u624B\u673A\u53F7",type:"text",maxlength:"11"},null,8,["modelValue","placeholder"])]),_:1}),a(f,{type:"primary",loading:g.value,onClick:U,style:{width:"100%"},size:"default"},{default:s(()=>[F(p(u(r)("message.system.register")||"\u6CE8\u518C"),1)]),_:1},8,["loading"]),l("div",se,[a(f,{type:"text",onClick:e[8]||(e[8]=o=>B(!0))},{default:s(()=>[F(p(u(r)("message.system.goToLogin")||"\u5DF2\u6709\u8D26\u53F7\uFF1F\u53BB\u767B\u5F55"),1)]),_:1})])]),_:1},8,["model"])),l("div",ae,[a(M)])])])])}}});var oe=j(te,[["__scopeId","data-v-40633cb4"]]);export{oe as default};
