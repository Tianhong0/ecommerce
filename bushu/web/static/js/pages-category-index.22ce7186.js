(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-category-index"],{"0547":function(t,e,a){"use strict";a.r(e);var n=a("a0af"),r=a("8526");for(var o in r)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("9ba7");var c=a("828b"),i=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"1db01794",null,!1,n["a"],void 0);e["default"]=i.exports},"11cc":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getProductList=e.getProductDetail=void 0;var n=a("a8e1");e.getProductList=function(t){return(0,n.get)("/product",t)};e.getProductDetail=function(t){return(0,n.get)("/product/".concat(t))}},"13e8":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getCategoryList=e.getCategoryDetail=void 0;var n=a("a8e1");e.getCategoryList=function(t){return(0,n.get)("/category",t)};e.getCategoryDetail=function(t){return(0,n.get)("/category/".concat(t))}},"14d0":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 主题颜色 */\n/* 文字颜色 */\n/* 边框颜色 */\n/* 背景颜色 */\n/* 字体大小 */\n/* 间距 */\n/* 圆角 */\n/* 阴影 */.category-container[data-v-1db01794]{display:flex;height:100vh;background-color:#f5f5f5}.category-container .category-menu[data-v-1db01794]{width:%?200?%;height:100%;background-color:#f7f7f7}.category-container .category-menu .menu-item[data-v-1db01794]{height:%?100?%;display:flex;align-items:center;justify-content:center;font-size:%?28?%;color:#606266;position:relative}.category-container .category-menu .menu-item.active[data-v-1db01794]{color:#ff6700;background-color:#fff;font-weight:700}.category-container .category-menu .menu-item.active[data-v-1db01794]::before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:%?6?%;height:%?36?%;background-color:#ff6700}.category-container .category-content[data-v-1db01794]{flex:1;height:100%;background-color:#fff}.category-container .category-content .content-header[data-v-1db01794]{padding:%?30?%;border-bottom:%?1?% solid #ebeef5}.category-container .category-content .content-header .content-title[data-v-1db01794]{font-size:%?32?%;font-weight:700;color:#303133}.category-container .category-content .product-list[data-v-1db01794]{display:flex;flex-wrap:wrap;padding:%?20?%}.category-container .category-content .product-list .product-item[data-v-1db01794]{width:48%;margin-bottom:%?20?%;margin-right:4%;background-color:#fff;border-radius:%?8?%;overflow:hidden;box-shadow:0 0 %?10?% rgba(0,0,0,.1)}.category-container .category-content .product-list .product-item[data-v-1db01794]:nth-child(2n){margin-right:0}.category-container .category-content .product-list .product-item .product-image[data-v-1db01794]{width:100%;height:%?180?%}.category-container .category-content .product-list .product-item .product-info[data-v-1db01794]{padding:%?16?%}.category-container .category-content .product-list .product-item .product-info .product-name[data-v-1db01794]{font-size:%?28?%;color:#303133;margin-bottom:%?10?%;height:%?80?%}.category-container .category-content .product-list .product-item .product-info .product-price[data-v-1db01794]{font-size:%?32?%;color:#ff6700;font-weight:700}.category-container .category-content .empty-state[data-v-1db01794]{padding:%?100?% 0;display:flex;align-items:center;justify-content:center;color:#909399;font-size:%?28?%}.category-container .category-content .loading[data-v-1db01794]{padding:%?30?% 0;display:flex;align-items:center;justify-content:center;color:#909399;font-size:%?28?%}',""]),t.exports=e},"30f7":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("7a76"),a("c9b5")},4733:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,n.default)(t)};var n=function(t){return t&&t.__esModule?t:{default:t}}(a("8d0b"))},8526:function(t,e,a){"use strict";a.r(e);var n=a("a157"),r=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"9ba7":function(t,e,a){"use strict";var n=a("a808"),r=a.n(n);r.a},a0af:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"category-container"},[a("v-uni-scroll-view",{staticClass:"category-menu",attrs:{"scroll-y":!0}},t._l(t.categoryList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"menu-item",class:{active:t.currentCategoryIndex===n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchCategory(n)}}},[t._v(t._s(e.name))])})),1),a("v-uni-scroll-view",{staticClass:"category-content",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"content-header"},[a("v-uni-text",{staticClass:"content-title"},[t._v(t._s(t.currentCategory.name))])],1),t.productList.length>0?a("v-uni-view",{staticClass:"product-list"},t._l(t.productList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"product-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navToDetail(e.id)}}},[a("v-uni-image",{staticClass:"product-image",attrs:{src:e.mainImage,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"product-info"},[a("v-uni-text",{staticClass:"product-name text-ellipsis-2"},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"product-price"},[t._v("¥"+t._s(e.price))])],1)],1)})),1):a("v-uni-view",{staticClass:"empty-state"},[a("v-uni-text",[t._v("暂无商品")])],1),t.loading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-text",[t._v("加载中...")])],1):t._e()],1)],1)},r=[]},a157:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223");var r=n(a("b7c7")),o=n(a("2634")),c=n(a("2fdc")),i=a("13e8"),d=a("11cc"),u={data:function(){return{categoryList:[],currentCategoryIndex:0,productList:[],pageNum:1,pageSize:10,hasMore:!0,loading:!1}},computed:{currentCategory:function(){return this.categoryList[this.currentCategoryIndex]||{}}},onLoad:function(){this.loadCategories()},methods:{loadCategories:function(){var t=this;return(0,c.default)((0,o.default)().mark((function e(){var a;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.getCategoryList)();case 3:a=e.sent,a&&a.data&&a.data.records&&(t.categoryList=a.data.records,t.categoryList.length>0&&t.loadProducts()),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("加载分类失败",e.t0),uni.showToast({title:"加载分类失败",icon:"none"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadProducts:function(){var t=this;return(0,c.default)((0,o.default)().mark((function e(){var a,n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasMore&&!t.loading){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.prev=3,a={page:t.pageNum,size:t.pageSize,categoryId:t.currentCategory.id},e.next=7,(0,d.getProductList)(a);case 7:n=e.sent,n&&n.data&&n.data.records&&(1===t.pageNum?t.productList=n.data.records:t.productList=[].concat((0,r.default)(t.productList),(0,r.default)(n.data.records)),t.hasMore=t.productList.length<n.data.total,t.pageNum++),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),console.error("加载商品失败",e.t0),uni.showToast({title:"加载商品失败",icon:"none"});case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))()},switchCategory:function(t){this.currentCategoryIndex!==t&&(this.currentCategoryIndex=t,this.productList=[],this.pageNum=1,this.hasMore=!0,this.loadProducts())},loadMore:function(){this.loadProducts()},navToDetail:function(t){uni.navigateTo({url:"/pages/product-detail/index?id=".concat(t)})}}};e.default=u},a808:function(t,e,a){var n=a("14d0");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("967d").default;r("a78c1760",n,!0,{sourceMap:!1,shadowMode:!1})},b7c7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.default)(t)||(0,r.default)(t)||(0,o.default)(t)||(0,c.default)()};var n=i(a("4733")),r=i(a("d14d")),o=i(a("5d6b")),c=i(a("30f7"));function i(t){return t&&t.__esModule?t:{default:t}}},d14d:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},a("01a2"),a("e39c"),a("bf0f"),a("844d"),a("18f7"),a("de6c"),a("08eb")}}]);