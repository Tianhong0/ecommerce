(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-detail-index"],{"11cc":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.getProductList=e.getProductDetail=void 0;var n=i("a8e1");e.getProductList=function(t){return(0,n.get)("/product",t)};e.getProductDetail=function(t){return(0,n.get)("/product/".concat(t))}},"42a3":function(t,e,i){"use strict";i.r(e);var n=i("9723"),a=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(c);e["default"]=a.a},"5c9c":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"detail-container"},[i("v-uni-swiper",{staticClass:"product-swiper",attrs:{"indicator-dots":!0,autoplay:!0,circular:!0,interval:3e3,duration:500}},[i("v-uni-swiper-item",[i("v-uni-image",{staticClass:"product-image",attrs:{src:t.product.mainImage,mode:"aspectFill"}})],1)],1),i("v-uni-view",{staticClass:"product-info"},[i("v-uni-view",{staticClass:"price-box"},[i("v-uni-text",{staticClass:"price"},[t._v("¥"+t._s(t.product.price))]),i("v-uni-text",{staticClass:"stock"},[t._v("库存: "+t._s(t.product.stock))])],1),i("v-uni-view",{staticClass:"name-box"},[i("v-uni-text",{staticClass:"name"},[t._v(t._s(t.product.name))])],1),i("v-uni-view",{staticClass:"desc-box"},[i("v-uni-text",{staticClass:"desc"},[t._v(t._s(t.product.description||"暂无描述"))])],1)],1),i("v-uni-view",{staticClass:"specs-box"},[i("v-uni-view",{staticClass:"specs-title"},[i("v-uni-text",[t._v("商品规格")])],1),i("v-uni-view",{staticClass:"specs-content"},[t.product.skuList&&t.product.skuList.length>0?i("v-uni-view",{staticClass:"specs-item"},[i("v-uni-text",{staticClass:"specs-label"},[t._v("选择规格")]),i("v-uni-view",{staticClass:"specs-values"},t._l(t.product.skuList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"specs-value",class:{active:t.selectedSkuIndex===n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectSku(n)}}},[t._v(t._s(e.name))])})),1)],1):t._e(),i("v-uni-view",{staticClass:"specs-item"},[i("v-uni-text",{staticClass:"specs-label"},[t._v("数量")]),i("v-uni-view",{staticClass:"quantity-box"},[i("v-uni-view",{staticClass:"quantity-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.decreaseQuantity.apply(void 0,arguments)}}},[t._v("-")]),i("v-uni-input",{staticClass:"quantity-input",attrs:{type:"number"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),i("v-uni-view",{staticClass:"quantity-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.increaseQuantity.apply(void 0,arguments)}}},[t._v("+")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"detail-box"},[i("v-uni-view",{staticClass:"detail-title"},[i("v-uni-text",[t._v("商品详情")])],1),i("v-uni-view",{staticClass:"detail-content"},[i("v-uni-rich-text",{attrs:{nodes:t.product.description||"暂无详情"}})],1)],1),i("v-uni-view",{staticClass:"action-bar"},[i("v-uni-view",{staticClass:"action-btn-group"},[i("v-uni-view",{staticClass:"action-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navToHome.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-home"}),i("v-uni-text",{staticClass:"icon-text"},[t._v("首页")])],1),i("v-uni-view",{staticClass:"action-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navToCart.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-cart"}),i("v-uni-text",{staticClass:"icon-text"},[t._v("购物车")]),t.cartCount>0?i("v-uni-view",{staticClass:"badge"},[t._v(t._s(t.cartCount))]):t._e()],1)],1),i("v-uni-view",{staticClass:"action-btn add-cart",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addToCart.apply(void 0,arguments)}}},[t._v("加入购物车")]),i("v-uni-view",{staticClass:"action-btn buy-now",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.buyNow.apply(void 0,arguments)}}},[t._v("立即购买")])],1)],1)},a=[]},"94cc":function(t,e,i){var n=i("d11c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("6546eb10",n,!0,{sourceMap:!1,shadowMode:!1})},9723:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2634")),c=n(i("2fdc")),o=n(i("9b1b")),s=i("11cc"),d=i("8f59"),r={data:function(){return{productId:null,product:{},selectedSkuIndex:0,quantity:1}},computed:(0,o.default)((0,o.default)({},(0,d.mapGetters)(["cartCount"])),{},{selectedSku:function(){return this.product.skuList&&this.product.skuList.length>0?this.product.skuList[this.selectedSkuIndex]:null}}),onLoad:function(t){this.productId=t.id,this.loadProductDetail()},methods:{loadProductDetail:function(){var t=this;return(0,c.default)((0,a.default)().mark((function e(){var i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,uni.showLoading({title:"加载中..."}),e.next=4,(0,s.getProductDetail)(t.productId);case 4:i=e.sent,uni.hideLoading(),i&&i.data&&(t.product=i.data),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](0),uni.hideLoading(),console.error("加载商品详情失败",e.t0),uni.showToast({title:"加载商品详情失败",icon:"none"});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()},selectSku:function(t){this.selectedSkuIndex=t},decreaseQuantity:function(){this.quantity>1&&this.quantity--},increaseQuantity:function(){var t=this.selectedSku?this.selectedSku.stock:this.product.stock;this.quantity<t?this.quantity++:uni.showToast({title:"已达最大库存",icon:"none"})},addToCart:function(){var t=uni.getStorageSync("token");if(t){var e={id:this.product.id,name:this.product.name,mainImage:this.product.mainImage,price:this.selectedSku?this.selectedSku.price:this.product.price,quantity:this.quantity,skuId:this.selectedSku?this.selectedSku.id:null,skuName:this.selectedSku?this.selectedSku.name:null};this.$store.commit("addToCart",e),uni.showToast({title:"添加成功",icon:"success"})}else uni.navigateTo({url:"/pages/login/index"})},buyNow:function(){var t=uni.getStorageSync("token");if(t){var e={id:this.product.id,name:this.product.name,mainImage:this.product.mainImage,price:this.selectedSku?this.selectedSku.price:this.product.price,quantity:this.quantity,skuId:this.selectedSku?this.selectedSku.id:null,skuName:this.selectedSku?this.selectedSku.name:null};uni.navigateTo({url:"/pages/order-confirm/index?direct=1"}),uni.setStorageSync("buyNowGoods",e)}else uni.navigateTo({url:"/pages/login/index"})},navToHome:function(){uni.switchTab({url:"/pages/index/index"})},navToCart:function(){uni.switchTab({url:"/pages/cart/index"})}}};e.default=r},d11c:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 主题颜色 */\n/* 文字颜色 */\n/* 边框颜色 */\n/* 背景颜色 */\n/* 字体大小 */\n/* 间距 */\n/* 圆角 */\n/* 阴影 */.detail-container[data-v-3c8ff8cd]{padding-bottom:%?100?%;background-color:#f5f5f5}.detail-container .product-swiper[data-v-3c8ff8cd]{width:100%;height:%?500?%}.detail-container .product-swiper .product-image[data-v-3c8ff8cd]{width:100%;height:100%}.detail-container .product-info[data-v-3c8ff8cd]{background-color:#fff;padding:%?30?%;margin-bottom:%?20?%}.detail-container .product-info .price-box[data-v-3c8ff8cd]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?20?%}.detail-container .product-info .price-box .price[data-v-3c8ff8cd]{font-size:%?48?%;color:#ff6700;font-weight:700}.detail-container .product-info .price-box .stock[data-v-3c8ff8cd]{font-size:%?28?%;color:#909399}.detail-container .product-info .name-box[data-v-3c8ff8cd]{margin-bottom:%?20?%}.detail-container .product-info .name-box .name[data-v-3c8ff8cd]{font-size:%?36?%;color:#303133;font-weight:700;line-height:1.4}.detail-container .product-info .desc-box .desc[data-v-3c8ff8cd]{font-size:%?28?%;color:#606266;line-height:1.5}.detail-container .specs-box[data-v-3c8ff8cd]{background-color:#fff;padding:%?30?%;margin-bottom:%?20?%}.detail-container .specs-box .specs-title[data-v-3c8ff8cd]{font-size:%?32?%;color:#303133;font-weight:700;margin-bottom:%?30?%}.detail-container .specs-box .specs-content .specs-item[data-v-3c8ff8cd]{margin-bottom:%?30?%}.detail-container .specs-box .specs-content .specs-item .specs-label[data-v-3c8ff8cd]{font-size:%?28?%;color:#606266;margin-bottom:%?20?%;display:block}.detail-container .specs-box .specs-content .specs-item .specs-values[data-v-3c8ff8cd]{display:flex;flex-wrap:wrap}.detail-container .specs-box .specs-content .specs-item .specs-values .specs-value[data-v-3c8ff8cd]{padding:%?10?% %?30?%;border:%?1?% solid #dcdfe6;border-radius:%?8?%;margin-right:%?20?%;margin-bottom:%?20?%;font-size:%?28?%;color:#606266}.detail-container .specs-box .specs-content .specs-item .specs-values .specs-value.active[data-v-3c8ff8cd]{border-color:#ff6700;color:#ff6700;background-color:rgba(255,103,0,.05)}.detail-container .specs-box .specs-content .specs-item .quantity-box[data-v-3c8ff8cd]{display:flex;align-items:center}.detail-container .specs-box .specs-content .specs-item .quantity-box .quantity-btn[data-v-3c8ff8cd]{width:%?70?%;height:%?70?%;display:flex;align-items:center;justify-content:center;border:%?1?% solid #dcdfe6;font-size:%?36?%}.detail-container .specs-box .specs-content .specs-item .quantity-box .quantity-input[data-v-3c8ff8cd]{width:%?100?%;height:%?70?%;text-align:center;border-top:%?1?% solid #dcdfe6;border-bottom:%?1?% solid #dcdfe6}.detail-container .detail-box[data-v-3c8ff8cd]{background-color:#fff;padding:%?30?%}.detail-container .detail-box .detail-title[data-v-3c8ff8cd]{font-size:%?32?%;color:#303133;font-weight:700;margin-bottom:%?30?%}.detail-container .detail-box .detail-content[data-v-3c8ff8cd]{font-size:%?28?%;color:#606266;line-height:1.6}.detail-container .action-bar[data-v-3c8ff8cd]{position:fixed;left:0;right:0;bottom:0;height:%?100?%;background-color:#fff;display:flex;align-items:center;box-shadow:0 %?-2?% %?10?% rgba(0,0,0,.05)}.detail-container .action-bar .action-btn-group[data-v-3c8ff8cd]{display:flex;width:%?200?%;height:100%}.detail-container .action-bar .action-btn-group .action-icon[data-v-3c8ff8cd]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}.detail-container .action-bar .action-btn-group .action-icon .iconfont[data-v-3c8ff8cd]{font-size:%?40?%;color:#606266}.detail-container .action-bar .action-btn-group .action-icon .icon-text[data-v-3c8ff8cd]{font-size:%?20?%;color:#909399;margin-top:%?6?%}.detail-container .action-bar .action-btn-group .action-icon .badge[data-v-3c8ff8cd]{position:absolute;top:%?10?%;right:%?20?%;min-width:%?32?%;height:%?32?%;border-radius:%?16?%;background-color:#ff6700;color:#fff;font-size:%?20?%;display:flex;align-items:center;justify-content:center;padding:0 %?6?%}.detail-container .action-bar .action-btn[data-v-3c8ff8cd]{flex:1;height:100%;display:flex;align-items:center;justify-content:center;font-size:%?32?%;color:#fff}.detail-container .action-bar .add-cart[data-v-3c8ff8cd]{background-color:#ff9500}.detail-container .action-bar .buy-now[data-v-3c8ff8cd]{background-color:#ff6700}',""]),t.exports=e},e83f:function(t,e,i){"use strict";var n=i("94cc"),a=i.n(n);a.a},fe53:function(t,e,i){"use strict";i.r(e);var n=i("5c9c"),a=i("42a3");for(var c in a)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(c);i("e83f");var o=i("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"3c8ff8cd",null,!1,n["a"],void 0);e["default"]=s.exports}}]);